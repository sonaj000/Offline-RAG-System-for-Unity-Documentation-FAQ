<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Create custom binding types</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20240425"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20240425"></script><script type="text/javascript" src="docdata/toc.js?ts=20240425"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20240425"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20240425">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2023.2</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-runtime-binding-custom-types.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-runtime-binding-custom-types.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-runtime-binding-custom-types.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-runtime-binding-custom-types.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2023.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-runtime-binding-custom-types.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-runtime-binding-custom-types.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-runtime-binding-custom-types.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-runtime-binding-custom-types.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UIToolkits.html">User interface (UI)</a></li>
<li><a href="UIElements.html">UI Toolkit</a></li>
<li><a href="UIE-data-binding.html">Data binding</a></li>
<li><a href="UIE-runtime-binding.html">Runtime data binding</a></li>
<li>Create custom binding types</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-runtime-binding-logging-levels.html"></a></span><div class="tip">Define logging levels</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-runtime-custom-binding-bind-uss.html"></a></span><div class="tip">Create a custom binding to bind USS selectors</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Create custom binding types</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>You can create custom binding types to extend the runtime binding system. To create a custom binding type, create a class and inherit it from the <a href="../ScriptReference/UIElements.CustomBinding.html"><code>CustomBinding</code></a> class. </p>

<h2>Register and unregister binding objects</h2>

<p>The <code>CustomBinding</code> is like the <a href="../ScriptReference/UIElements.IBinding.html"><code>IBinding</code></a> interface, which allows you to register multiple binding instances instead of a single one. The <code>CustomBinding</code> is an extensibility entry point and only provides an <a href="../ScriptReference/UIElements.CustomBinding.Update.html"><code>Update</code></a> method to update the binding. However, you can implement the following methods to receive a callback when a binding is registered, unregistered, and when the data source context has changed on an element:</p>

<ul>
<li><a href="../ScriptReference/UIElements.Binding.OnActivated.html"><code>OnActivated</code></a></li>
<li><a href="../ScriptReference/UIElements.Binding.OnDeactivated.html"><code>OnDeactivated</code></a></li>
<li><a href="../ScriptReference/UIElements.Binding.OnDataSourceChanged.html"><code>OnDataSourceChanged</code></a></li>
</ul>

<h2>Define data source and data source path</h2>

<p>To define the data source and data source path for a binding type, implement the <a href="../ScriptReference/UIElements.IDataSourceProvider.html"><code>IDataSourceProvider</code></a> interface. The binding system uses the <code>dataSource</code> and <code>dataSourcePath</code> properties provided by this interface to determine the resolved data source and data source path. These properties are referred to as “local” because they override the values obtained from the hierarchy. Importantly, modifying these “local” properties doesn’t impact the element itself or any of its descendants.</p>

<h2>Define update triggers</h2>

<p>By default, the binding system updates a <code>CustomBinding</code> instance on every frame. </p>

<p>To define update triggers, use the following methods:</p>

<ul>
<li>
<a href="../ScriptReference/UIElements.Binding.MarkDirty.html"><code>MarkDirty</code></a>: Sets the binding object as <a href="../ScriptReference/UIElements.Binding-isDirty.html"><code>dirty</code></a> so that it gets updated during the next cycle.</li>
<li>
<a href="../ScriptReference/UIElements.Binding-updateTrigger.html"><code>updateTrigger</code></a>: Use this <code>enum</code> property to change how the binding is updated.</li>
<li>
<a href="../ScriptReference/UIElements.BindingResult.html"><code>BindingResult</code></a>: Use this method to customize the update process. The <a href="../ScriptReference/UIElements.BindingResult.html"><code>BindingResult</code></a> is a struct that tells you whether the update was successful. It contains a <code>status</code> and a <code>message</code>.</li>
</ul>

<p>The <a href="../ScriptReference/UIElements.BindingResult.html"><code>BindingResult</code></a> contains a <code>status</code> and a <code>message</code>. The following are the possible values of <code>status</code>:</p>

<ul>
<li>
<strong>Success</strong>: The binding update was successful. If the binding instance doesn’t require constant updates, it isn’t updated again until there is a change in the data source or the binding instance is explicitly marked as dirty, based on the update trigger.</li>
<li>
<strong>Failure</strong>: The binding update was unsuccessful. If the binding instance doesn’t require constant updates, it isn’t updated again until there is a change in the data source or the binding instance is explicitly marked as dirty, based on the update trigger.</li>
<li>
<strong>Pending</strong>: The binding update is still in progress. The system automatically marks the binding instance as dirty until it receives a success or failure response.</li>
</ul>

<p>You can use the <code>Pending</code> result of the <code>BindingResult</code> method to inform the binding system if a binding object needs to be updated on the next cycle.</p>

<h2>Example</h2>

<p>This section provides an example to demonstrate how to create a custom binding type and set up the binding in <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. Unity currently supports three UI systems. <a class="tooltipMoreInfoLink" href="UI-system-compare.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UI">Glossary</a></span></span></span> Builder, UXML, and C#.</p>

<p>The following example creates a custom binding type that displays the current time. You can bind it to the <code>text</code> property of a Label to create a clock. </p>

<pre><code class="lang-cs">using System;
using Unity.Properties;
using UnityEngine.UIElements;

[UxmlObject]
public partial class CurrentTimeBinding : CustomBinding
{
    [UxmlAttribute]
    public string timeFormat = &quot;HH:mm:ss&quot;;

    public CurrentTimeBinding()
    {
        updateTrigger = BindingUpdateTrigger.EveryUpdate;
    }

    protected override BindingResult Update(in BindingContext context)
    {
        var timeNow = DateTime.Now.ToString(timeFormat);
        var element = context.targetElement;
        if (ConverterGroups.TrySetValueGlobal(ref element, context.bindingId, timeNow, out var errorCode))
            return new BindingResult(BindingStatus.Success);

        // Error handling
        var bindingTypename = TypeUtility.GetTypeDisplayName(typeof(CurrentTimeBinding));
        var bindingId = $&quot;{TypeUtility.GetTypeDisplayName(element.GetType())}.{context.bindingId}&quot;;

        return errorCode switch
        {
            VisitReturnCode.InvalidPath =&gt; new BindingResult(BindingStatus.Failure, $&quot;{bindingTypename}: Binding id `{bindingId}` is either invalid or contains a `null` value.&quot;),
            VisitReturnCode.InvalidCast =&gt; new BindingResult(BindingStatus.Failure, $&quot;{bindingTypename}: Invalid conversion from `string` for binding id `{bindingId}`&quot;),
            VisitReturnCode.AccessViolation =&gt; new BindingResult(BindingStatus.Failure, $&quot;{bindingTypename}: Trying set value for binding id `{bindingId}`, but it is read-only.&quot;),
            _ =&gt; throw new ArgumentOutOfRangeException()
        };
    }
}
</code></pre>

<p>When you create a custom binding type, it appears in the <strong>Add binding</strong> window in UI Builder. To set up the binding in UI Builder, in the <strong>Add Binding</strong> window, select <strong>CurrentTimeBinding</strong> from the <strong>Type</strong> list.</p>

<p>The UXML equivalent of this binding is as follows:</p>

<pre><code class="lang-xml"> &lt;ui:Label text=&quot;Label&quot;&gt;
    &lt;Bindings&gt;
        &lt;CurrentTimeBinding property=&quot;text&quot; /&gt;
    &lt;/Bindings&gt;
&lt;/ui:Label&gt;
</code></pre>

<p>The C# equivalent of this binding is as follows:</p>

<pre><code class="lang-csharp">var label = new Label();
label.SetBinding(&quot;text&quot;,  new CurrentTimeBinding());
</code></pre>

<h2>Best practices</h2>

<p>Follow these tips and best practices to optimize performance:</p>

<ul>
<li>
<strong>Minimize per-element state usage</strong>: Reduce reliance on per-element state in your custom binding types. Instead, leverage shared or global state whenever possible to enhance performance and simplify maintenance.</li>
<li>
<strong>Use <code>BindingUpdateTrigger.OnSourceChanged</code></strong>: When your binding type only requires updates when changes are detected in the source, set the <code>updateTrigger</code> to <code>BindingUpdateTrigger.OnSourceChanged</code>. This ensures that the binding type is updated only when necessary, optimizing performance.</li>
<li>
<strong>Use <code>BindingUpdateTrigger.WhenDirty</code> for manual updates</strong>: If you update your binding type manually and don’t require immediate synchronization, set the <code>updateTrigger</code> to <code>BindingUpdateTrigger.WhenDirty</code>. This allows you to manually control when the binding type updates, providing flexibility and control over synchronization.</li>
<li>
<strong>Leverage callbacks</strong>: Whenever possible, use the <code>OnActivated</code>, <code>OnDeactivated</code>, or <code>OnDataSourceChanged</code> callbacks instead of the <code>Update</code> callback. These callbacks are triggered at specific lifecycle events, reducing unnecessary updates and improving efficiency. By using the appropriate callback, you can optimize your binding type’s behavior and ensure updates occur precisely when needed.</li>
</ul>

<h2>Additional resources</h2>

<ul>
<li><a href="UIE-runtime-binding.html">Runtime data binding</a></li>
<li><a href="UIE-runtime-binding-types.html">Create runtime data binding</a></li>
<li><a href="UIE-runtime-custom-binding-bind-uss.html">Create a custom binding to bind USS selectors</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-runtime-binding-logging-levels.html"></a></span><div class="tip">Define logging levels</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-runtime-custom-binding-bind-uss.html"></a></span><div class="tip">Create a custom binding to bind USS selectors</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-04-25.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
