<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Create a custom binding to bind USS selectors</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20240425"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20240425"></script><script type="text/javascript" src="docdata/toc.js?ts=20240425"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20240425"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20240425">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2023.2</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-runtime-custom-binding-bind-uss.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-runtime-custom-binding-bind-uss.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-runtime-custom-binding-bind-uss.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-runtime-custom-binding-bind-uss.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2023.2</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-runtime-custom-binding-bind-uss.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-runtime-custom-binding-bind-uss.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-runtime-custom-binding-bind-uss.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-runtime-custom-binding-bind-uss.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UIToolkits.html">User interface (UI)</a></li>
<li><a href="UIElements.html">UI Toolkit</a></li>
<li><a href="UIE-data-binding.html">Data binding</a></li>
<li><a href="UIE-runtime-binding.html">Runtime data binding</a></li>
<li>Create a custom binding to bind USS selectors</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-runtime-binding-custom-types.html"></a></span><div class="tip">Create custom binding types</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-editor-binding.html"></a></span><div class="tip">SerializedObject data binding</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Create a custom binding to bind USS selectors</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>
<strong>Version</strong>: 2023.2+</p>

<p>This example shows how to create a custom binding that binds USS selectors to a <span class="tooltip"><strong>visual element</strong><span class="tooltiptext">A node of a visual tree that instantiates or derives from the C# <a class="tooltipMoreInfoLink" href="../ScriptReference/UIElements.VisualElement.html"><code>VisualElement</code></a> class. You can style the look, define the behaviour, and display it on screen as part of the UI. <a href="UIE-VisualTree.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Visualelement">Glossary</a></span></span></span>.</p>

<h2>Example overview</h2>

<p>This example creates a custom binding that assigns USS class selectors to each child element of a visual element based on the order of the child elements in the hierarchy. The first element always has the left round corner edge, while the last element always has the right round corner edge.</p>

<p>You can find the completed files that this example creates in this <a href="https://github.com/Unity-Technologies/ui-toolkit-manual-code-examples/tree/2023.2/runtime-custom-binding">GitHub repository</a>.</p>

<h2>Prerequisites</h2>

<p>This guide is for developers familiar with the Unity Editor, <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. Unity currently supports three UI systems. <a class="tooltipMoreInfoLink" href="UI-system-compare.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UI">Glossary</a></span></span></span> Toolkit, and C# scripting. Before you start, get familiar with the following:</p>

<ul>
<li><a href="UIBuilder.html">UI Builder</a></li>
<li><a href="UIE-UXML.html">UXML</a></li>
</ul>

<h2>Create a custom binding type</h2>

<p>Create a custom binding type that assigns USS classes based on the sibling index. The binding updates only when the sibling index changes.</p>

<ol>
<li><p>Create a project in Unity with any template.</p></li>
<li>
<p>In the <code>Assets</code> folder of your project, create a C# script named <code>AddMenuUSSClass.cs</code> with the following content:</p>

<pre><code class="lang-cs">using UnityEngine.UIElements;
    
[UxmlObject]
public partial class AddMenuUssClass : CustomBinding
{
    protected override BindingResult Update(in BindingContext context)
    {
        // Assign USS classes based on the sibling index. The binding updates when the sibling index changes.
        var element = context.targetElement;
        var index = element.parent.IndexOf(element);
        element.EnableInClassList(&quot;menu-button--first&quot;, index == 0);
        element.EnableInClassList(&quot;menu-button--last&quot;, index == element.parent.childCount - 1);                
            
        return new BindingResult(BindingStatus.Success);
    }
}
</code></pre>
</li>
</ol>

<h2>Create the UI and the binding</h2>

<p>Generally speaking, you create a binding that binds to an existing property of the element. For demonstration purposes, this example creates a custom binding that binds to a property that doesn’t exist in the element. You must use UXML or C# to set up the binding that binds to a non-existing property. This example uses UXML to set up the binding.</p>

<ol>
<li>
<p>In the <code>Assets</code> folder of your project, create a USS file named <code>CustomBinding.uss</code> with the following contents:</p>

<pre><code class="lang-cs">.menu-button {
    flex-direction: row;
    height: 64px;
    align-items: center; 
    justify-content: center;
}
    
.menu-button--first {
    border-top-left-radius: 15px;
    border-bottom-left-radius: 15px;
    border-left-width: 2px;
}
    
.menu-button--last {
    border-top-right-radius: 15px;
    border-bottom-right-radius: 15px;
    border-right-width: 2px;
}
    
Button {
    margin: 0px;
    border-color: red;
}
</code></pre>
</li>
<li>
<p>In the <code>Assets</code> folder of your project, create a UXML file named <code>CustomBinding.uxml</code> with the following contents:</p>

<pre><code class="lang-cs">&lt;ui:UXML xmlns:ui=&quot;UnityEngine.UIElements&quot; xmlns:uie=&quot;UnityEditor.UIElements&quot; editor-extension-mode=&quot;True&quot;&gt;
    &lt;ui:VisualElement class=&quot;menu-button&quot;&gt;
        &lt;ui:Button text=&quot;Bloub&quot;&gt;
            &lt;Bindings&gt;
                &lt;AddMenuUssClass property=&quot;add-menu-button-class&quot; /&gt;
            &lt;/Bindings&gt;
        &lt;/ui:Button&gt;
        &lt;ui:Button text=&quot;Bip&quot;&gt;
            &lt;Bindings&gt;
                &lt;AddMenuUssClass property=&quot;add-menu-button-class&quot; /&gt;
            &lt;/Bindings&gt;
        &lt;/ui:Button&gt;
        &lt;ui:Button text=&quot;Boop&quot;&gt;
            &lt;Bindings&gt;
                &lt;AddMenuUssClass property=&quot;add-menu-button-class&quot; /&gt;
            &lt;/Bindings&gt;
        &lt;/ui:Button&gt;
    &lt;/ui:VisualElement&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li><p>Double-click the <code>CustomBinding.uxml</code> file to open it in UI Builder.</p></li>
<li><p>In the StyleSheet panel, select <strong>+</strong> &gt; <strong>Add Existing USS</strong>, and then select the <code>CustomBinding.uss</code> file.</p></li>
<li><p>Save your changes. </p></li>
</ol>

<h2>Test the binding</h2>

<p>To test the binding, change the order of the button elements in the UI Builder and observe the changes in the UI Builder <span class="tooltip"><strong>Viewport</strong><span class="tooltiptext">The user’s visible area of an app on their screen.<br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Viewport">Glossary</a></span></span></span>.</p>

<ol>
<li>Double-click the <code>CustomBinding.uxml</code> file to open it in UI Builder.</li>
<li>In the Hierarchy panel, expand the root VisualElement to display the child elements, which are buttons.</li>
<li>Drag and drop the buttons to change their order. The first button always has the left round corner edge, while the last button always has the right round corner edge.</li>
</ol>

<h2>Additional resources</h2>

<ul>
<li><a href="UIE-runtime-binding.html">Runtime data binding</a></li>
<li><a href="UIE-runtime-binding-types.html">Create runtime data binding</a></li>
<li><a href="UIE-runtime-binding-custom-types.html">Create custom binding types</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-runtime-binding-custom-types.html"></a></span><div class="tip">Create custom binding types</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-editor-binding.html"></a></span><div class="tip">SerializedObject data binding</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-04-25.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
